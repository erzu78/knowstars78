<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>常用点赞及取消点赞动画jquery特效</title>
    <meta name="keywords" content="常用,点赞,取消点赞,点赞动画,jquery特效" />
    <meta name="description" content="常用点赞及取消点赞动画jquery特效。" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--样式表开始-->
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.5.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="css/zzsc-demo.css">
    <link rel="stylesheet" type="text/css" href="css/icons.css" />
    <!-- 引入bootstrap的css -->
    <link href="../js/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入bootstrap-treeview的css -->
    <link href="../js/treeview/bootstrap-treeview.min.css" rel="stylesheet">
    <!-- 引入bootstrap-addTabs的css -->
    <link href="../js/addTabs/addTabs.css" rel="stylesheet">
    <!-- 引入bootstrap-table的css -->
    <link href="../js/table/bootstrap-table.min.css" rel="stylesheet">
    <!-- 引入fileinput的css -->
    <link type="text/css" rel="stylesheet" href="../js/fileinput/css/fileinput.min.css"/>

    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- 引入jquery -->
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <!-- 引入my97 -->
    <script type="text/javascript" src="../js/my97/WdatePicker.js"></script>
    <!-- 引入bootstrap的js-->
    <script type="text/javascript" src="../js/bootstrap/js/bootstrap.min.js"></script>
    <!-- 引入bootstrap的js-->
    <script type="text/javascript" src="../js/treeview/bootstrap-treeview.min.js"></script>
    <!-- 引入bootstrap的js-->
    <script type="text/javascript" src="../js/addTabs/addTabs.js"></script>
    <!-- 引入bootstrap-table的js-->
    <script type="text/javascript" src="../js/table/bootstrap-table.min.js"></script>
    <script type="text/javascript" src="../js/table/locale/bootstrap-table-zh-CN.min.js"></script>
    <!-- 引入bootbox.js -->
    <script type="text/javascript" src="../js/bootbox/bootbox.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.jsdaima.com/Upload/1482989740/demo.css"/>
    <!--样式表结束-->
    <script type="text/javascript" src="https://www.jsdaima.com/Upload/1482989740/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
        function stops(){
            return false;
        }
        document.oncontextmenu=stops;
    </script>
</head>

<body>

<!--动态点赞开始-->
<div class="text-content">
    <h1>艾弗森、科比、詹姆斯，谁的得分能力更强？</h1>

</div>

<div style="align-content: center">
<div class="praise" style="float: left">
    <span id="praise" onclick="xiHuan()"><img src="https://www.jsdaima.com/Upload/1482989740/zan.png"/></span>
    <span id="zhanCount"></span>
</div>
    <div class="feed" id="feed1" style="float: right">
        <div class="heart " id="like1" rel="like" onclick="shou()"></div> <div class="likeCount" id="shouCount"></div>
    </div>

</div>

<!--动态点赞结束-->
<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>

<script>

    $(function(){
        queryZhan();
        queryShou();
            $("#praise").click(function(){
                var praise_img = $("#praise-img");
                var text_box = $("#add-num");
                var praise_txt = $("#praise-txt");
                var num=parseInt(praise_txt.text());

                if(praise_img.attr("src") == ("https://www.jsdaima.com/Upload/1482989740/yizan.png")){
                    $(this).html("<img src='https://www.jsdaima.com/Upload/1482989740/zan.png' id='praise-img' class='animation' />");
                    praise_txt.removeClass("hover");
                    text_box.show().html("<em class='add-animation'>-1</em>");
                    $(".add-animation").removeClass("hover");
                    num -=1;
                    praise_txt.text(num)
                }else{
                    $(this).html("<img src='https://www.jsdaima.com/Upload/1482989740/yizan.png' id='praise-img' class='animation' />");
                    praise_txt.addClass("hover");
                    text_box.show().html("<em class='add-animation'>+1</em>");
                    $(".add-animation").addClass("hover");
                    num +=1;
                    praise_txt.text(num)
                }
            });

    })
    $(document).ready(function()
    {

        $('body').on("click",'.heart',function()
        {
            var A=$(this).attr("id");
            var B=A.split("like");
            var messageID=B[1];
            var C=parseInt($("#likeCount"+messageID).html());
            $(this).css("background-position","")
            var D=$(this).attr("rel");

            if(D === 'like')
            {
                $("#likeCount"+messageID).html(C+1);
                $(this).addClass("heartAnimation").attr("rel","unlike");

            }
            else
            {
                $("#likeCount"+messageID).html(C-1);
                $(this).removeClass("heartAnimation").attr("rel","like");
                $(this).css("background-position","left");
            }


        });


    });
    queryZhan = function(){
        $.ajax({
            url:"http://192.168.1.108:8000/queryZhan",
            type:'get',
            data:{infId:666},
            dataType:"json",
            success:function(data){
                // alert(data);
                $("#zhanCount").html(data);

            },
            error:function(){
                bootbox.alert("失败");
            }
        });
    }

    queryShou = function(){
        $.ajax({
            url:"http://192.168.1.108:8000/queryshou",
            type:'get',
            data:{heartId:333},
            dataType:"json",
            success:function(data){
                // alert(data);
                $("#shouCount").html(data);

            },
            error:function(){
                bootbox.alert("失败");
            }
        });
    }
    /* @author:Romey
     * 动态点赞
     * 此效果包含css3，部分浏览器不兼容（如：IE10以下的版本）
    */
    xiHuan = function(){
       //alert("ssss")
        $.ajax({
            url:"http://192.168.1.108:8000/zizi",
            type:'post',
            data:{infId:666,liveTime:1},
            dataType:"json",
            success:function(){
                queryZhan();
            },
            error:function(){
                bootbox.alert("失败");
            }
        });

    }
    shou = function(){
        //alert("ssss")
        $.ajax({
            url:"http://192.168.1.108:8000/zizeng",
            type:'post',
            data:{heartId:333,liveTime:1},
            dataType:"json",
            success:function(){
                queryShou();
            },
            error:function(){
                bootbox.alert("失败");
            }
        });

    }




</script>
</body>
</html>
